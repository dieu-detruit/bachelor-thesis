% pethesis.sty
\typeout{pethesis.sty - Sat, Jan 23 2010 by Takashi Michikawa}

\usepackage{fancyhdr}
\usepackage{fancybox}
\usepackage{times}
\usepackage[T1]{fontenc}

\usepackage{enumerate}

\oddsidemargin=-0.4truemm  
\evensidemargin=-0.4truemm 
\topmargin=-10.4truemm
\headsep=10truemm
\footskip=10truemm
\textwidth=160truemm 
\textheight=231truemm 


\def\thesistype#1{\gdef\@thesistype{#1}}
\def\title#1{\gdef\@title{#1}}
\def\etitle#1{\gdef\@etitle{#1}}
\def\studentid#1{\gdef\@studentid{#1}}
\def\author#1{\gdef\@author{#1}}
\def\supervisor#1{\gdef\@supervisor{#1}}
\def\affiliation#1{\gdef\@affiliation{#1}}


\renewcommand\maketitle{
	\thispagestyle{empty}
  	\fancypage{\setlength{\fboxrule}{1.8truemm}\fbox}
  	{}
	\begin{center}
	\vspace*{15truemm}
	{\bf \@thesistype}\\
	\vspace*{5truemm}
	\includegraphics[width=45truemm]{utlogo.eps}\\
	\vspace*{20truemm}
	{\bfseries{\LARGE \@title}} \\

	\vspace*{10truemm}
	{\Large \@etitle}\\
	\vspace*{40truemm}
 	{\Large 指導教員 \quad \@supervisor}\\
 	\vspace*{20truemm}

 	{\large \@affiliation}\\
 	\vspace*{8truemm}
 	{\large 学生証番号\@studentid} \\
 	 	\vspace*{10truemm}

 	 {\large \@author}
 	\vfill
	\end{center}
	\newpage
	\fancypage{}{}
	\cleardoublepage
}


\newenvironment{coverabstract}{
\thispagestyle{empty} \vspace*{40truemm} \begin{center} {\bf これどこ}\end{center} \begin{minipage}[t]{\textwidth}}{
 \end{minipage}}


 \pagestyle{fancyplain}
 \fancyhead{}
\fancyhead[RO,RE]{\rightmark}
\fancyhead[LE,LO]{\leftmark}
\fancyhead[RE]{\gdef\headrulewidth{.4pt}}
\fancyhead[LO]{\gdef\headrulewidth{.4pt}}
\fancyfoot[C]{\thepage}
\renewcommand{\chaptermark}[1]{\markboth{第\ \thechapter\ 章~#1}{}}
\renewcommand{\sectionmark}[1]{\markright{\thesection #1}{}}


\renewcommand{\bibname}{参考文献}

\makeatletter
\renewenvironment{thebibliography}[1]
{\chapter*{\bibname\@mkboth{\bibname}{\bibname}}
 \addcontentsline{toc}{chapter}{\bibname}
   \list{\@biblabel{\@arabic\c@enumiv}}
        {\settowidth\labelwidth{\@biblabel{#1}}
         \leftmargin\labelwidth
         \advance\leftmargin\labelsep
         \@openbib@code
         \usecounter{enumiv}
         \let\p@enumiv\@empty
         \renewcommand\theenumiv{\@arabic\c@enumiv}}
   \sloppy
   \clubpenalty4000
   \@clubpenalty\clubpenalty
   \widowpenalty4000
   \sfcode`\.\@m}
  {\def\@noitemerr
    {\@latex@warning{Empty `thebibliography' environment}}
   \endlist}
\makeatother

\makeatletter
\renewcommand{\chapter}{
  \if@openright\cleardoublepage\else\clearpage\fi

    \global\@topnum\z@
  \if@english \@afterindentfalse \else \@afterindenttrue \fi
  \secdef\@chapter\@schapter
}

\makeatother

\setcounter{tocdepth}{2}

\makeatletter
\renewcommand{\@dotsep}{1} 
\makeatother

\setlength{\labelwidth}{-4pt}
\def\mythebibliography#1{

\list
 {[\arabic{enumi}]}{\leftmargin\labelwidth
 \advance\leftmargin\labelsep
 \usecounter{enumi}}
 \setlength{\itemsep}{4pt}
 \setlength{\topsep}{6pt}
 \setlength{\parsep}{2pt} 

 \def\newblock{\hskip .05em plus .15em minus .07em}
 \sloppy
 \sfcode`\.=1000\relax
}
\let\endmythebibliography=\endlist